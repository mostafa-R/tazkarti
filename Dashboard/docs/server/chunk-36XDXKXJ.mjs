import './polyfills.server.mjs';
import{a as I}from"./chunk-MQSKHPLU.mjs";import"./chunk-J4BDXTMW.mjs";import{a as B,c as N,e as L,n as j}from"./chunk-KDKMURU3.mjs";import{a as T}from"./chunk-6FUP6TKS.mjs";import{c as A,d as F}from"./chunk-23YQJXF4.mjs";import{$a as C,Aa as i,Bb as U,Eb as d,Fb as c,Qa as y,V as _,Xa as b,Y as w,Ya as x,_a as O,ab as t,bb as n,cb as m,ib as h,jb as v,mb as z,sb as r,tb as l,ub as p,xb as S,yb as k,zb as E}from"./chunk-VS54HDVL.mjs";import{a as M,b as P}from"./chunk-VVCT4QZE.mjs";function Y(s,f){if(s&1&&(t(0,"tr",41)(1,"td",42),r(2),n(),t(3,"td")(4,"div",43)(5,"div",44),m(6,"i",10),n(),t(7,"span",45),r(8),n()()(),t(9,"td")(10,"div",46),m(11,"i",47),r(12),n()(),t(13,"td",40)(14,"span",48),m(15,"i",49),r(16),n()()()),s&2){let e=f.$implicit,a=f.$index;i(2),l(a+1),i(6),l((e==null?null:e.name)||(e==null?null:e.userName)||(e==null?null:e.firstName)),i(4),p(" ",e==null?null:e.email," "),i(4),p(" ",(e==null||e.ticketsBooked==null?null:e.ticketsBooked.length)||0," ")}}function $(s,f){if(s&1&&(t(0,"div",30)(1,"div",33)(2,"h2",34),m(3,"i",25),r(4),d(5,"translate"),t(6,"span",35),r(7),n()()(),t(8,"div",36)(9,"div",37)(10,"table",38)(11,"thead",39)(12,"tr")(13,"th",40),r(14,"#"),n(),t(15,"th"),r(16),d(17,"translate"),n(),t(18,"th"),r(19),d(20,"translate"),n(),t(21,"th",40),r(22),d(23,"translate"),n()()(),t(24,"tbody"),O(25,Y,17,4,"tr",41,x),n()()()()()),s&2){let e=v();i(4),p(" ",c(5,5,"users.Users")," "),i(3),l(e.filteredUsers.length),i(9),l(c(17,7,"users.Name")),i(3),l(c(20,9,"users.Email")),i(3),l(c(23,11,"users.Tickets")),i(3),C(e.filteredUsers)}}function D(s,f){if(s&1&&(t(0,"tr",41)(1,"td",42),r(2),n(),t(3,"td")(4,"div",43)(5,"div",51),m(6,"i",15),n(),t(7,"span",45),r(8),n()()(),t(9,"td")(10,"div",46),m(11,"i",47),r(12),n()(),t(13,"td",40)(14,"span",52),m(15,"i",53),r(16),n()()()),s&2){let e=f.$implicit,a=f.$index;i(2),l(a+1),i(6),l((e==null?null:e.firstName)||(e==null?null:e.name)||(e==null?null:e.userName)),i(4),p(" ",e==null?null:e.email," "),i(4),p(" ",(e==null?null:e.eventsCount)||0," ")}}function W(s,f){if(s&1&&(t(0,"div",31)(1,"div",33)(2,"h2",34),m(3,"i",27),r(4),d(5,"translate"),t(6,"span",50),r(7),n()()(),t(8,"div",36)(9,"div",37)(10,"table",38)(11,"thead",39)(12,"tr")(13,"th",40),r(14,"#"),n(),t(15,"th"),r(16),d(17,"translate"),n(),t(18,"th"),r(19),d(20,"translate"),n(),t(21,"th",40),r(22),d(23,"translate"),n()()(),t(24,"tbody"),O(25,D,17,4,"tr",41,x),n()()()()()),s&2){let e=v();i(4),p(" ",c(5,5,"users.Organizers")," "),i(3),l(e.filteredOrganizers.length),i(9),l(c(17,7,"users.Name")),i(3),l(c(20,9,"users.Email")),i(3),l(c(23,11,"users.Events Created")),i(3),C(e.filteredOrganizers)}}function V(s,f){s&1&&(t(0,"div",32)(1,"div",54),m(2,"i",55),n(),t(3,"h4"),r(4),d(5,"translate"),n(),t(6,"p",56),r(7),d(8,"translate"),n()()),s&2&&(i(4),l(c(5,2,"users.No Users Found")),i(3),l(c(8,4,"users.Try adjusting your search criteria or add a new user.")))}var ee=(()=>{class s{constructor(){this.usersOnly=[],this.organizersOnly=[],this.filteredUsers=[],this.filteredOrganizers=[],this.searchTerm="",this.showUsers=!0,this.showOrganizers=!0,this._AppService=_(T),this.spinner=_(I)}ngOnInit(){this.spinner.show(),setTimeout(()=>this.spinner.hide(),1e3),this._AppService.getusers().subscribe({next:e=>{console.log("Users data:",e),this.Users=e.map(a=>P(M({},a),{tickets:a.ticketsBooked||[]})),this.usersOnly=this.Users.filter(a=>a.role==="user"),this.organizersOnly=this.Users.filter(a=>a.role==="organizer"),console.log("Users only:",this.usersOnly.length),console.log("Organizers only:",this.organizersOnly.length),this.filteredUsers=[...this.usersOnly],this._AppService.getevents().subscribe({next:a=>{console.log("Events data:",a),this.filteredOrganizers=this.organizersOnly.map(o=>{let u=a.filter(g=>typeof g.organizer=="string"?g.organizer===o._id:g.organizer?._id===o._id);return{id:o._id,firstName:o.firstName,email:o.email,organizationName:o.organizationName||"",eventNames:u.map(g=>g.title),eventsCount:u.length}}),console.log("Filtered organizers:",this.filteredOrganizers)},error:a=>{console.error("Error fetching events:",a)}})},error:e=>{console.error("Error fetching users:",e),this.spinner.hide()}})}filterUsers(){if(!this.searchTerm.trim())this.filteredUsers=[...this.usersOnly],this.filteredOrganizers=[...this.filteredOrganizers];else{let e=this.searchTerm.toLowerCase();this.filteredUsers=this.usersOnly.filter(a=>a.name?.toLowerCase().includes(e)||a.userName?.toLowerCase().includes(e)||a.username?.toLowerCase().includes(e)||a.email?.toLowerCase().includes(e)),this.filteredOrganizers=this.filteredOrganizers.filter(a=>a.firstName?.toLowerCase().includes(e)||a.email?.toLowerCase().includes(e)||a.organizationName?.toLowerCase().includes(e))}}showUsersOnly(){this.showUsers=!0,this.showOrganizers=!1}showOrganizersOnly(){this.showUsers=!1,this.showOrganizers=!0}showAll(){this.showUsers=!0,this.showOrganizers=!0}static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275cmp=w({type:s,selectors:[["app-users"]],standalone:!0,features:[U],decls:53,vars:27,consts:[[1,"users-header","mb-4"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"display-6","fw-bold","text-gradient","mb-2"],[1,"fas","fa-users","me-3"],[1,"col-md-6","text-md-end"],[1,"stats-container"],[1,"stats-card"],[1,"stats-icon","users-icon"],[1,"fas","fa-user"],[1,"stats-content"],[1,"stats-number"],[1,"stats-label"],[1,"stats-icon","organizers-icon"],[1,"fas","fa-user-tie"],[1,"search-section","mb-4"],[1,"row","g-3"],[1,"col-md-8"],[1,"search-box"],[1,"fas","fa-search","search-icon"],["type","text",1,"form-control","search-input",3,"ngModelChange","input","placeholder","ngModel"],[1,"col-md-4"],[1,"filter-buttons"],[1,"btn","btn-outline-primary","filter-btn",3,"click"],[1,"fas","fa-user","me-2"],[1,"btn","btn-outline-success","filter-btn",3,"click"],[1,"fas","fa-user-tie","me-2"],[1,"btn","btn-outline-info","filter-btn",3,"click"],[1,"fas","fa-list","me-2"],[1,"users-section","mb-5"],[1,"organizers-section"],[1,"empty-state"],[1,"section-header"],[1,"section-title"],[1,"badge","bg-success","ms-2"],[1,"table-container"],[1,"table-responsive"],[1,"table","custom-table"],[1,"table-header"],[1,"text-center"],[1,"table-row"],[1,"text-center","fw-bold"],[1,"user-info"],[1,"user-avatar"],[1,"user-name"],[1,"email-info"],[1,"fas","fa-envelope","me-2"],[1,"tickets-badge"],[1,"fas","fa-ticket-alt","me-1"],[1,"badge","bg-primary","ms-2"],[1,"user-avatar","organizer-avatar"],[1,"events-badge"],[1,"fas","fa-calendar","me-1"],[1,"empty-icon"],[1,"fas","fa-users-slash"],[1,"text-muted"]],template:function(a,o){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),m(5,"i",5),r(6),d(7,"translate"),n()(),t(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),m(12,"i",10),n(),t(13,"div",11)(14,"h3",12),r(15),n(),t(16,"p",13),r(17),d(18,"translate"),n()()(),t(19,"div",8)(20,"div",14),m(21,"i",15),n(),t(22,"div",11)(23,"h3",12),r(24),n(),t(25,"p",13),r(26),d(27,"translate"),n()()()()()()()(),t(28,"div",16)(29,"div",1)(30,"div",17)(31,"div",18)(32,"div",19),m(33,"i",20),t(34,"input",21),d(35,"translate"),E("ngModelChange",function(g){return k(o.searchTerm,g)||(o.searchTerm=g),g}),h("input",function(){return o.filterUsers()}),n()()(),t(36,"div",22)(37,"div",23)(38,"button",24),h("click",function(){return o.showUsersOnly()}),m(39,"i",25),r(40),d(41,"translate"),n(),t(42,"button",26),h("click",function(){return o.showOrganizersOnly()}),m(43,"i",27),r(44),d(45,"translate"),n(),t(46,"button",28),h("click",function(){return o.showAll()}),m(47,"i",29),r(48),d(49,"translate"),n()()()()()(),y(50,$,27,13,"div",30)(51,W,27,13,"div",31)(52,V,9,6,"div",32)),a&2&&(i(6),p(" ",c(7,13,"users.Users Management")," "),i(9),l(o.usersOnly.length),i(2),l(c(18,15,"users.Total Users")),i(7),l(o.organizersOnly.length),i(2),l(c(27,17,"users.Organizers")),i(8),z("placeholder",c(35,19,"users.Search users...")),S("ngModel",o.searchTerm),i(6),p(" ",c(41,21,"users.Users Only")," "),i(4),p(" ",c(45,23,"users.Organizers Only")," "),i(4),p(" ",c(49,25,"users.Show All")," "),i(2),b(50,o.showUsers?50:-1),i(),b(51,o.showOrganizers?51:-1),i(),b(52,o.showUsers&&o.filteredUsers.length===0||o.showOrganizers&&o.filteredOrganizers.length===0?52:-1))},dependencies:[j,B,N,L,F,A],styles:[".users-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2rem 0;border-radius:15px;margin-bottom:2rem}.users-header[_ngcontent-%COMP%]   .text-gradient[_ngcontent-%COMP%]{background:linear-gradient(45deg,#fff,#f0f0f0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.stats-container[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}.stats-card[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:1rem;display:flex;align-items:center;gap:.75rem;border:1px solid rgba(255,255,255,.3);min-width:140px}.stats-card[_ngcontent-%COMP%]   .stats-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem}.stats-card[_ngcontent-%COMP%]   .stats-icon.users-icon[_ngcontent-%COMP%], .stats-card[_ngcontent-%COMP%]   .stats-icon.organizers-icon[_ngcontent-%COMP%]{background:#ffffff4d}.stats-card[_ngcontent-%COMP%]   .stats-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0}.stats-card[_ngcontent-%COMP%]   .stats-label[_ngcontent-%COMP%]{margin:0;opacity:.9;font-size:.8rem}.search-section[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:1.5rem;box-shadow:0 10px 30px #0000001a;border:1px solid #e9ecef}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#6c757d;z-index:10}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding-left:45px;border-radius:25px;border:2px solid #e9ecef;transition:all .3s ease;height:50px;font-size:1rem}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{border-radius:25px;padding:.5rem 1rem;font-weight:500;transition:all .3s ease;font-size:.9rem}.filter-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #0000001a}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.5rem;margin:0;display:flex;align-items:center}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.5rem .75rem}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:15px;box-shadow:0 10px 30px #0000001a;overflow:hidden;border:1px solid #e9ecef}.custom-table[_ngcontent-%COMP%]{margin:0}.custom-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff}.custom-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:1rem;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.custom-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{transition:all .3s ease;border-bottom:1px solid #f8f9fa}.custom-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:scale(1.01)}.custom-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.custom-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border:none}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1rem}.user-avatar.organizer-avatar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140)}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.email-info[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem}.tickets-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.9rem;display:inline-block}.events-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140);color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.9rem;display:inline-flex;align-items:center;gap:.25rem}.organization-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.9rem;display:inline-flex;align-items:center;gap:.25rem}.event-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140);color:#fff;padding:.25rem .75rem;border-radius:15px;font-size:.8rem;margin:.25rem;display:inline-block;font-weight:500}.events-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.action-btn[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .3s ease;border:2px solid}.action-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 5px 15px #0000001a}.action-btn.btn-outline-primary[_ngcontent-%COMP%]{border-color:#667eea;color:#667eea}.action-btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.action-btn.btn-outline-warning[_ngcontent-%COMP%]{border-color:#ffc107;color:#ffc107}.action-btn.btn-outline-warning[_ngcontent-%COMP%]:hover{background:#ffc107;color:#fff}.action-btn.btn-outline-danger[_ngcontent-%COMP%]{border-color:#dc3545;color:#dc3545}.action-btn.btn-outline-danger[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#6c757d}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:#dee2e6;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin-bottom:.5rem}@media (max-width: 768px){.users-header[_ngcontent-%COMP%]{padding:1.5rem 0}.users-header[_ngcontent-%COMP%]   .display-6[_ngcontent-%COMP%]{font-size:1.5rem}.stats-container[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.stats-card[_ngcontent-%COMP%]{min-width:auto;padding:.75rem}.stats-card[_ngcontent-%COMP%]   .stats-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}.stats-card[_ngcontent-%COMP%]   .stats-number[_ngcontent-%COMP%]{font-size:1.2rem}.search-section[_ngcontent-%COMP%]{padding:1rem}.filter-buttons[_ngcontent-%COMP%]{justify-content:center}.filter-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.4rem .8rem}.custom-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custom-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem;font-size:.9rem}.user-avatar[_ngcontent-%COMP%]{width:35px;height:35px;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.action-btn[_ngcontent-%COMP%]{width:30px;height:30px;font-size:.8rem}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.table-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}"]})}}return s})();export{ee as UsersComponent};
