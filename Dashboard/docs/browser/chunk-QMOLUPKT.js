import{a as S}from"./chunk-V55QIYSC.js";import{a as E,c as y,d as U}from"./chunk-V4NYCHS6.js";import"./chunk-XAZLOLJU.js";import{a as T,b as o,c as I,d as w,f as O,g as P,h as q,m as A,o as F}from"./chunk-XYWXEGNL.js";import{a as M}from"./chunk-GAYWGVBC.js";import{Ma as f,Oa as s,Qb as x,Tb as C,Ya as n,Za as e,_ as b,_a as c,eb as _,ob as a,wa as m,xa as u,xb as D}from"./chunk-XKOZPAWX.js";function N(r,h){r&1&&(n(0,"div",18),a(1," Title is required (min 3 characters) "),e())}function j(r,h){r&1&&(n(0,"div",18),a(1," Start Date is required "),e())}function R(r,h){r&1&&(n(0,"div",18),a(1," End Date is required "),e())}function k(r,h){r&1&&(n(0,"div",18),a(1," Time is required "),e())}var Q=(()=>{class r{constructor(t,d,i,l,p){this._fb=t,this._AppService=d,this._ActivatedRoute=i,this._Router=l,this._Toastr=p,this.id=""}ngOnInit(){this.formUpdate=this._fb.group({title:["",[o.required,o.minLength(3)]],startDate:["",o.required],endDate:["",o.required],time:["",o.required]}),this.id=this._ActivatedRoute.snapshot.params.id,this._AppService.geteventById(this.id).subscribe({next:t=>{this.formData=t,this.formUpdate.patchValue({title:this.formData.title,startDate:this.formatDate(this.formData.startDate),endDate:this.formatDate(this.formData.endDate),time:this.formatTime(this.formData.time)})},error:t=>console.error("Get Event Error:",t)})}formatDate(t){return t?t.split("T")[0]:""}formatTime(t){return t?t.substring(0,5):""}initForm(){this.formUpdate=this._fb.group({title:[this.formData.title||"",[o.required,o.minLength(3)]],startDate:[this.formData.startDate||"",o.required],endDate:[this.formData.endDate||"",o.required],time:[this.formData.time||"",o.required]})}onSubmit(){if(this.formUpdate.invalid){this.formUpdate.markAllAsTouched();return}let t=this.formUpdate.value;this._AppService.updateEvent(t,this.id).subscribe({next:d=>{this._Toastr.success("Event updated successfully"),this._Router.navigate(["/events"]),console.log("Event updated",d)},error:d=>console.error("Update Event Error:",d)})}static{this.\u0275fac=function(d){return new(d||r)(u(A),u(M),u(E),u(y),u(S))}}static{this.\u0275cmp=b({type:r,selectors:[["app-update"]],standalone:!0,features:[D],decls:33,vars:6,consts:[[1,"update-event-page","d-flex","justify-content-center","align-items-center"],[1,"card","update-event-card","shadow-lg"],[1,"card-header","bg-gradient","text-white","text-center"],[1,"mb-0"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","fw-semibold"],["formControlName","title","placeholder","Enter event title",1,"form-control","form-control-lg"],["class","text-danger small",4,"ngIf"],[1,"row"],[1,"col-md-6","mb-3"],["type","date","formControlName","startDate",1,"form-control","form-control-lg"],["type","date","formControlName","endDate",1,"form-control","form-control-lg"],["type","time","formControlName","time",1,"form-control","form-control-lg"],[1,"d-flex","justify-content-end","gap-3","mt-4"],["type","button","routerLink","/events",1,"btn","btn-outline-secondary","px-4"],["type","submit",1,"btn","gradient-btn","px-4",3,"disabled"],[1,"text-danger","small"]],template:function(d,i){if(d&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),a(4,"\u270F\uFE0F Update Event"),e()(),n(5,"div",4)(6,"form",5),_("ngSubmit",function(){return i.onSubmit()}),n(7,"div",6)(8,"label",7),a(9,"Event Title"),e(),c(10,"input",8),f(11,N,2,0,"div",9),e(),n(12,"div",10)(13,"div",11)(14,"label",7),a(15,"Start Date"),e(),c(16,"input",12),f(17,j,2,0,"div",9),e(),n(18,"div",11)(19,"label",7),a(20,"End Date"),e(),c(21,"input",13),f(22,R,2,0,"div",9),e()(),n(23,"div",6)(24,"label",7),a(25,"Event Time"),e(),c(26,"input",14),f(27,k,2,0,"div",9),e(),n(28,"div",15)(29,"button",16),a(30,"\u274C Cancel"),e(),n(31,"button",17),a(32,"\u{1F4BE} Save"),e()()()()()()),d&2){let l,p,v,g;m(6),s("formGroup",i.formUpdate),m(5),s("ngIf",((l=i.formUpdate.get("title"))==null?null:l.touched)&&((l=i.formUpdate.get("title"))==null?null:l.invalid)),m(6),s("ngIf",((p=i.formUpdate.get("startDate"))==null?null:p.touched)&&((p=i.formUpdate.get("startDate"))==null?null:p.invalid)),m(5),s("ngIf",((v=i.formUpdate.get("endDate"))==null?null:v.touched)&&((v=i.formUpdate.get("endDate"))==null?null:v.invalid)),m(5),s("ngIf",((g=i.formUpdate.get("time"))==null?null:g.touched)&&((g=i.formUpdate.get("time"))==null?null:g.invalid)),m(4),s("disabled",i.formUpdate.invalid)}},dependencies:[F,O,T,I,w,P,q,C,x,U],styles:[".update-event-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;justify-content:center;align-items:center;padding:2rem}.update-event-card[_ngcontent-%COMP%]{width:100%;max-width:650px;border-radius:20px;box-shadow:0 10px 25px #00000026;border:1px solid #e9ecef;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out;overflow:hidden}.update-event-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff;font-weight:700;padding:1rem}.update-event-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:15px;border:2px solid #e9ecef;transition:all .3s ease}.update-event-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.gradient-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe);border:none;color:#fff;border-radius:25px;font-weight:600;padding:.75rem 1.5rem;transition:all .3s ease}.gradient-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #4facfe66}.gradient-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})}}return r})();export{Q as UpdateComponent};
