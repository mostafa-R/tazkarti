import './polyfills.server.mjs';
import{a as z,b as q,c as L,d as I}from"./chunk-OTK7M3IE.mjs";import"./chunk-J4BDXTMW.mjs";import{m as y,n as D,o as T,w as A}from"./chunk-2MBE3K3C.mjs";import{Gb as n,Hb as g,Ib as u,Na as d,Nb as w,Oa as O,Qb as b,Rb as C,Ya as f,Z as P,cb as v,eb as _,hb as E,jb as x,lb as k,mb as S,nb as e,ob as t,pb as a,u as M,yb as h}from"./chunk-44K7GKB5.mjs";import"./chunk-VVCT4QZE.mjs";var j=(o,m)=>m.id;function R(o,m){if(o&1&&(e(0,"div",36),a(1,"ngx-charts-line-chart",60),t()),o&2){let i=h();d(),_("results",i.usersLineChartData())("gradient",!0)("xAxis",!0)("yAxis",!0)("legend",!1)("showXAxisLabel",!0)("showYAxisLabel",!0)("autoScale",!0)("curve",i.curve)}}function B(o,m){o&1&&(e(0,"div",61)(1,"div",62),a(2,"i",63),t(),e(3,"p"),n(4,"Loading chart data..."),t()())}function F(o,m){if(o&1&&(e(0,"div",36),a(1,"ngx-charts-bar-vertical",64),t()),o&2){let i=h();d(),_("results",i.chartData())("gradient",!0)("xAxis",!0)("yAxis",!0)("legend",!1)("showXAxisLabel",!0)("showYAxisLabel",!0)("animations",!0)}}function $(o,m){o&1&&(e(0,"div",61)(1,"div",62),a(2,"i",63),t(),e(3,"p"),n(4,"Loading statistics..."),t()())}function J(o,m){if(o&1&&(e(0,"tr")(1,"td")(2,"div",66)(3,"div",67),a(4,"i",68),t(),e(5,"span",69),n(6),t()()(),e(7,"td")(8,"div",70),a(9,"i",71),n(10),t()(),e(11,"td")(12,"div",72),a(13,"i",73),n(14),b(15,"date"),t()(),e(16,"td")(17,"span",74),n(18),t()()()),o&2){let i=m.$implicit,s=h(2);d(6),g(i.name),d(4),u(" ",i.location," "),d(4),u(" ",C(15,6,i.date,"MMM dd, yyyy")," "),d(3),E(s.getEventStatus(i.date)),d(),u(" ",s.getEventStatusText(i.date)," ")}}function N(o,m){if(o&1&&(e(0,"div",59)(1,"table",65)(2,"thead")(3,"tr")(4,"th"),n(5,"Event Name"),t(),e(6,"th"),n(7,"Location"),t(),e(8,"th"),n(9,"Date"),t(),e(10,"th"),n(11,"Status"),t()()(),e(12,"tbody"),k(13,J,19,9,"tr",null,j),t()()()),o&2){let i=h();d(13),S(i.latestEvents())}}function X(o,m){o&1&&(e(0,"div",61)(1,"div",62),a(2,"i",63),t(),e(3,"p"),n(4,"Loading events..."),t()())}var ie=(()=>{class o{constructor(i){this.http=i,this.chartData=f([]),this.latestEvents=f([]),this.usersLineChartData=f([]),this.usersCount=f(0),this.eventsCount=f(0),this.ticketsCount=f(0),this.curve=z,this.currentDate=new Date,this.colorScheme={domain:["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe"]}}ngOnInit(){let i=this.http.get("http://localhost:3000/users"),s=this.http.get("http://localhost:3000/tickets"),r=this.http.get("http://localhost:3000/events");M([i,s,r]).subscribe({next:([c,l,p])=>{this.chartData.set([{name:"Users",value:c.length},{name:"Tickets",value:l.length},{name:"Events",value:p.length}]),this.usersLineChartData.set([{name:"Users",series:this.getUsersPerMonth(c)}]),this.usersCount.set(c.length),this.eventsCount.set(p.length),this.ticketsCount.set(l.length),this.latestEvents.set(p.sort((U,Y)=>new Date(Y.date).getTime()-new Date(U.date).getTime()).slice(0,5))},error:c=>console.error("Error loading data:",c)})}getUsersPerMonth(i){let s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r={};return i.forEach(c=>{let l=new Date(c.createdAt||new Date),p=s[l.getMonth()];r[p]=(r[p]||0)+1}),s.map(c=>({name:c,value:r[c]||0}))}calculateRevenue(){return this.ticketsCount()*150}newUsersThisMonth(){let i=new Date().getMonth(),s=new Date().getFullYear(),r=this.usersCount();return Math.floor(r*.15)}upcomingEvents(){let i=this.latestEvents(),s=new Date;return i.filter(r=>new Date(r.date)>s).length}averageRating(){return 4.2}getEventStatus(i){let s=new Date(i),r=new Date,c=s.getTime()-r.getTime(),l=Math.ceil(c/(1e3*60*60*24));return l<0?"past":l<=7?"ongoing":"upcoming"}getEventStatusText(i){let s=new Date(i),r=new Date,c=s.getTime()-r.getTime(),l=Math.ceil(c/(1e3*60*60*24));return l<0?"Past":l<=7?"Soon":"Upcoming"}static{this.\u0275fac=function(s){return new(s||o)(O(A))}}static{this.\u0275cmp=P({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[w],decls:137,vars:17,consts:[[1,"dashboard-header"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"display-5","fw-bold","text-gradient","mb-2"],[1,"fas","fa-tachometer-alt","me-3"],[1,"col-md-4","text-md-end"],[1,"date-display"],[1,"fas","fa-calendar-day","me-2"],[1,"stats-section"],[1,"row","g-4"],[1,"col-lg-3","col-md-6"],[1,"stat-card","users-card"],[1,"stat-icon"],[1,"fas","fa-users"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-trend"],[1,"fas","fa-arrow-up","text-success"],[1,"trend-text"],[1,"stat-card","events-card"],[1,"fas","fa-calendar-alt"],[1,"stat-card","tickets-card"],[1,"fas","fa-ticket-alt"],[1,"stat-card","revenue-card"],[1,"fas","fa-dollar-sign"],[1,"charts-section"],[1,"col-lg-8"],[1,"chart-card"],[1,"chart-header"],[1,"chart-title"],[1,"fas","fa-chart-line","me-2"],[1,"chart-actions"],[1,"btn","btn-sm","btn-outline-primary"],[1,"chart-body"],[1,"chart-container"],[1,"col-lg-4"],[1,"quick-stats-card"],[1,"quick-stats-header"],[1,"quick-stats-title"],[1,"fas","fa-chart-pie","me-2"],[1,"quick-stats-body"],[1,"quick-stat-item"],[1,"quick-stat-icon"],[1,"fas","fa-user-plus"],[1,"quick-stat-content"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-star"],[1,"general-stats-section"],[1,"fas","fa-chart-bar","me-2"],[1,"latest-events-section"],[1,"events-card"],[1,"events-header"],[1,"events-title"],[1,"fas","fa-clock","me-2"],["href","/events",1,"btn","btn-outline-primary","btn-sm"],[1,"fas","fa-external-link-alt","me-1"],[1,"events-body"],[1,"events-table-container"],["xAxisLabel","Month","yAxisLabel","Users Count",3,"results","gradient","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","autoScale","curve"],[1,"loading-state"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["xAxisLabel","Category","yAxisLabel","Count",3,"results","gradient","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","animations"],[1,"events-table"],[1,"event-info"],[1,"event-icon"],[1,"fas","fa-calendar"],[1,"event-name"],[1,"location-info"],[1,"fas","fa-map-marker-alt","me-1"],[1,"date-info"],[1,"fas","fa-calendar-day","me-1"],[1,"status-badge"]],template:function(s,r){s&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5,"i",5),n(6," Dashboard Overview "),t()(),e(7,"div",6)(8,"div",7),a(9,"i",8),n(10),b(11,"date"),t()()()()(),e(12,"div",9)(13,"div",1)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13),a(18,"i",14),t(),e(19,"div",15)(20,"h3",16),n(21),t(),e(22,"p",17),n(23,"Total Users"),t(),e(24,"div",18),a(25,"i",19),e(26,"span",20),n(27,"+12% this month"),t()()()()(),e(28,"div",11)(29,"div",21)(30,"div",13),a(31,"i",22),t(),e(32,"div",15)(33,"h3",16),n(34),t(),e(35,"p",17),n(36,"Active Events"),t(),e(37,"div",18),a(38,"i",19),e(39,"span",20),n(40,"+8% this week"),t()()()()(),e(41,"div",11)(42,"div",23)(43,"div",13),a(44,"i",24),t(),e(45,"div",15)(46,"h3",16),n(47),t(),e(48,"p",17),n(49,"Tickets Sold"),t(),e(50,"div",18),a(51,"i",19),e(52,"span",20),n(53,"+15% today"),t()()()()(),e(54,"div",11)(55,"div",25)(56,"div",13),a(57,"i",26),t(),e(58,"div",15)(59,"h3",16),n(60),b(61,"currency"),t(),e(62,"p",17),n(63,"Total Revenue"),t(),e(64,"div",18),a(65,"i",19),e(66,"span",20),n(67,"+22% this month"),t()()()()()()()(),e(68,"div",27)(69,"div",1)(70,"div",10)(71,"div",28)(72,"div",29)(73,"div",30)(74,"h3",31),a(75,"i",32),n(76," Users Growth "),t(),e(77,"div",33)(78,"button",34),n(79,"Export"),t()()(),e(80,"div",35),v(81,R,2,9,"div",36)(82,B,5,0),t()()(),e(83,"div",37)(84,"div",38)(85,"div",39)(86,"h3",40),a(87,"i",41),n(88," Quick Stats "),t()(),e(89,"div",42)(90,"div",43)(91,"div",44),a(92,"i",45),t(),e(93,"div",46)(94,"h4"),n(95),t(),e(96,"p"),n(97,"New Users This Month"),t()()(),e(98,"div",43)(99,"div",44),a(100,"i",47),t(),e(101,"div",46)(102,"h4"),n(103),t(),e(104,"p"),n(105,"Upcoming Events"),t()()(),e(106,"div",43)(107,"div",44),a(108,"i",48),t(),e(109,"div",46)(110,"h4"),n(111),t(),e(112,"p"),n(113,"Average Event Rating"),t()()()()()()()()(),e(114,"div",49)(115,"div",1)(116,"div",29)(117,"div",30)(118,"h3",31),a(119,"i",50),n(120," Platform Statistics "),t()(),e(121,"div",35),v(122,F,2,8,"div",36)(123,$,5,0),t()()()(),e(124,"div",51)(125,"div",1)(126,"div",52)(127,"div",53)(128,"h3",54),a(129,"i",55),n(130," Latest Events "),t(),e(131,"a",56),a(132,"i",57),n(133," View All "),t()(),e(134,"div",58),v(135,N,15,0,"div",59)(136,X,5,0),t()()()()),s&2&&(d(10),u(" ",C(11,11,r.currentDate,"EEEE, MMMM d, y")," "),d(11),g(r.usersCount()),d(13),g(r.eventsCount()),d(13),g(r.ticketsCount()),d(13),g(C(61,14,r.calculateRevenue(),"EGP")),d(21),x(81,r.usersLineChartData().length>0?81:82),d(14),g(r.newUsersThisMonth()),d(8),g(r.upcomingEvents()),d(8),g(r.averageRating()),d(11),x(122,r.chartData().length>0?122:123),d(13),x(135,r.latestEvents().length>0?135:136))},dependencies:[T,D,y,I,q,L],styles:[".dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2rem 0;border-radius:15px;margin-bottom:2rem}.dashboard-header[_ngcontent-%COMP%]   .text-gradient[_ngcontent-%COMP%]{background:linear-gradient(45deg,#fff,#f0f0f0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.dashboard-header[_ngcontent-%COMP%]   .date-display[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:25px;padding:.75rem 1.5rem;display:inline-block;border:1px solid rgba(255,255,255,.3);font-weight:500}.stats-section[_ngcontent-%COMP%]{margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:1.5rem;box-shadow:0 10px 30px #0000001a;border:1px solid #e9ecef;transition:all .3s ease;height:100%}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 40px #00000026}.stat-card.users-card[_ngcontent-%COMP%]{border-left:4px solid #667eea}.stat-card.events-card[_ngcontent-%COMP%]{border-left:4px solid #4facfe}.stat-card.tickets-card[_ngcontent-%COMP%]{border-left:4px solid #fa709a}.stat-card.revenue-card[_ngcontent-%COMP%]{border-left:4px solid #ff6b6b}.stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff;margin-bottom:1rem}.users-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.events-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.tickets-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140)}.revenue-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a24)}.stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin-bottom:.75rem}.stat-content[_ngcontent-%COMP%]   .stat-trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.8rem}.stat-content[_ngcontent-%COMP%]   .stat-trend[_ngcontent-%COMP%]   .trend-text[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.charts-section[_ngcontent-%COMP%]{margin-bottom:2rem}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a;border:1px solid #e9ecef;overflow:hidden}.chart-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1.5rem;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.chart-header[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.25rem;margin:0}.chart-header[_ngcontent-%COMP%]   .chart-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:20px;font-size:.8rem;padding:.5rem 1rem}.chart-body[_ngcontent-%COMP%]{padding:1.5rem}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}.quick-stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a;border:1px solid #e9ecef;overflow:hidden;height:100%}.quick-stats-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1.5rem;border-bottom:1px solid #e9ecef}.quick-stats-header[_ngcontent-%COMP%]   .quick-stats-title[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.25rem;margin:0}.quick-stats-body[_ngcontent-%COMP%]{padding:1.5rem}.quick-stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 0;border-bottom:1px solid #f8f9fa}.quick-stat-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.quick-stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.2rem}.quick-stat-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c3e50;margin:0 0 .25rem}.quick-stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin:0}.general-stats-section[_ngcontent-%COMP%], .latest-events-section[_ngcontent-%COMP%]{margin-bottom:2rem}.events-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a;border:1px solid #e9ecef;overflow:hidden}.events-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1.5rem;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.events-header[_ngcontent-%COMP%]   .events-title[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.25rem;margin:0}.events-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:20px;font-size:.8rem;padding:.5rem 1rem}.events-body[_ngcontent-%COMP%]{padding:1.5rem}.events-table-container[_ngcontent-%COMP%]{overflow-x:auto}.events-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;color:#2c3e50;font-weight:600;padding:1rem;text-align:left;border-bottom:2px solid #e9ecef;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.events-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f8f9fa;vertical-align:middle}.events-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.events-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.event-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.event-icon[_ngcontent-%COMP%]{width:35px;height:35px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.9rem}.event-name[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.location-info[_ngcontent-%COMP%], .date-info[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;display:flex;align-items:center}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:15px;font-size:.8rem;font-weight:600;text-transform:uppercase}.status-badge.upcoming[_ngcontent-%COMP%]{background:#667eea1a;color:#667eea}.status-badge.ongoing[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.status-badge.past[_ngcontent-%COMP%]{background:#6c757d1a;color:#6c757d}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#6c757d}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{font-size:2rem;color:#667eea;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}@media (max-width: 768px){.dashboard-header[_ngcontent-%COMP%]{padding:1.5rem 0}.dashboard-header[_ngcontent-%COMP%]   .display-5[_ngcontent-%COMP%]{font-size:1.5rem}.dashboard-header[_ngcontent-%COMP%]   .date-display[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.stat-card[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.2rem}.stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.5rem}.chart-header[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;gap:1rem;text-align:center}.chart-body[_ngcontent-%COMP%]{padding:1rem}.chart-container[_ngcontent-%COMP%]{height:300px}.quick-stats-header[_ngcontent-%COMP%], .events-header[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;gap:1rem;text-align:center}.quick-stats-body[_ngcontent-%COMP%]{padding:1rem}.quick-stat-item[_ngcontent-%COMP%]{padding:.75rem 0}.quick-stat-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}.quick-stat-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem}.events-body[_ngcontent-%COMP%]{padding:1rem}.events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .events-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem;font-size:.9rem}.event-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:.8rem}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.stat-card[_ngcontent-%COMP%], .chart-card[_ngcontent-%COMP%], .quick-stats-card[_ngcontent-%COMP%], .events-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}"]})}}return o})();export{ie as DashboardComponent};
